# Sales & Invoicing Module Documentation

> **âš ï¸ NOTICE: DO NOT CHANGE THE LOGIC AND FRONT UI**
> 
> This document describes the current implementation. Any modifications should maintain existing functionality and user interface design.

---

## Table of Contents

1. [Module Overview](#module-overview)
2. [Architecture & Component Structure](#architecture--component-structure)
3. [Complete Sales Workflow Diagram](#complete-sales-workflow-diagram)
4. [Module Components](#module-components)
   - [Sales Inquiry](#1-sales-inquiry)
   - [Sales Quotation](#2-sales-quotation)
   - [Sales Invoice](#3-sales-invoice)
   - [Sales Returns](#4-sales-returns)
   - [Delivery Challan](#5-delivery-challan)
   - [Customer Price Structures](#6-customer-price-structures)
   - [Distributor Aging Report](#7-distributor-aging-report)
   - [Receivable Reminders](#8-receivable-reminders)
5. [Inter-Module Relationships](#inter-module-relationships)
6. [Data Flow Diagrams](#data-flow-diagrams)
7. [Button Functions Reference](#button-functions-reference)
8. [State Management](#state-management)
9. [Database Schema (Future)](#database-schema-future)

---

## Module Overview

The Sales & Invoicing module is a comprehensive system for managing the complete sales lifecycle from initial customer inquiry to final delivery and payment collection. It integrates with inventory management for stock reservation and tracking.

### Key Features
- **Sales Pipeline Management**: Inquiry â†’ Quotation â†’ Invoice â†’ Delivery
- **Stock Reservation System**: Automatic stock reservation on invoice creation
- **Partial Delivery Tracking**: Track multiple deliveries per invoice
- **Multi-tier Pricing**: Retail, Wholesale, Market, and Distributor pricing
- **Accounts Receivable Management**: Aging reports, reminders, and rescheduling
- **Document Generation**: Printable invoices, quotations, challans, and returns

### File Location
```
src/pages/Sales.tsx                          # Main Sales page with tab navigation
src/components/sales/
â”œâ”€â”€ SalesInquiry.tsx                         # Customer inquiry management
â”œâ”€â”€ SalesQuotation.tsx                       # Quotation creation and conversion
â”œâ”€â”€ SalesInvoice.tsx                         # Invoice with stock reservation
â”œâ”€â”€ SalesReturns.tsx                         # Return order processing
â”œâ”€â”€ DeliveryChallan.tsx                      # Delivery dispatch and confirmation
â”œâ”€â”€ CustomerPriceStructures.tsx              # Customer pricing tiers
â”œâ”€â”€ DistributorAging.tsx                     # Aging report analysis
â”œâ”€â”€ ReceivableReminders.tsx                  # Payment reminders system
â”œâ”€â”€ InvoiceItemPicker.tsx                    # Item selection modal
â”œâ”€â”€ InvoiceDeliveryLog.tsx                   # Delivery tracking modal
â”œâ”€â”€ PrintableDocument.tsx                    # Print document component
â””â”€â”€ StockAccountsIntegration.tsx             # Stock-accounts integration
```

---

## Architecture & Component Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              Sales.tsx (Main Page)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Horizontal Tab Navigation                         â”‚   â”‚
â”‚  â”‚  [Inquiry] [Quotation] [Invoice] [Returns] [Delivery] [Pricing]...  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                         Content Area                                 â”‚   â”‚
â”‚  â”‚  Renders active tab component based on selection                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Tab Configuration
| Tab ID | Label | Icon | Description |
|--------|-------|------|-------------|
| `inquiry` | Inquiry | MessageSquare | Manage sales inquiries |
| `quotation` | Quotation | FileText | Create & manage quotations |
| `invoice` | Invoice | Receipt | Sales invoices with stock reserve |
| `returns` | Returns | RotateCcw | Process returns |
| `delivery-challan` | Delivery | Truck | Dispatch & confirmation |
| `price-structures` | Pricing | DollarSign | Retail/Wholesale/Market pricing |
| `distributor-aging` | Aging Report | Clock | Aging report analysis |
| `receivable-reminders` | Receivables | Bell | Reminders & rescheduling |

---

## Complete Sales Workflow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              COMPLETE SALES WORKFLOW                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚   CUSTOMER   â”‚
                                    â”‚   CONTACT    â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 1: INQUIRY                                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                            SALES INQUIRY                                             â”‚ â”‚
â”‚ â”‚  â€¢ Part Lookup (Master Part â†’ Part No)                                              â”‚ â”‚
â”‚ â”‚  â€¢ Customer Information Collection                                                   â”‚ â”‚
â”‚ â”‚  â€¢ Subject & Description                                                             â”‚ â”‚
â”‚ â”‚  â€¢ Status: New â†’ In Progress â†’ Quoted â†’ Closed                                      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â”‚ Convert to Quote
                                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 2: QUOTATION                                                                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                           SALES QUOTATION                                            â”‚ â”‚
â”‚ â”‚  â€¢ Auto-generate Quotation Number (SQ-XXX)                                          â”‚ â”‚
â”‚ â”‚  â€¢ Customer Details                                                                  â”‚ â”‚
â”‚ â”‚  â€¢ Item Selection with Quantities                                                    â”‚ â”‚
â”‚ â”‚  â€¢ Validity Period                                                                   â”‚ â”‚
â”‚ â”‚  â€¢ Status: Draft â†’ Sent â†’ Accepted â†’ Rejected                                       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â”‚ Convert to Sales Order
                                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 3: INVOICE & STOCK RESERVATION                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                            SALES INVOICE                                             â”‚ â”‚
â”‚ â”‚                                                                                      â”‚ â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚ â”‚  â”‚ STOCK STATUS FLOW                                                          â”‚    â”‚ â”‚
â”‚ â”‚  â”‚                                                                            â”‚    â”‚ â”‚
â”‚ â”‚  â”‚   AVAILABLE â”€â”€[Create Invoice]â”€â”€â–¶ RESERVED â”€â”€[Deliver]â”€â”€â–¶ OUT            â”‚    â”‚ â”‚
â”‚ â”‚  â”‚       â–²                              â”‚                                     â”‚    â”‚ â”‚
â”‚ â”‚  â”‚       â”‚                              â”‚ [Cancel Invoice]                    â”‚    â”‚ â”‚
â”‚ â”‚  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚    â”‚ â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚ â”‚                                                                                      â”‚ â”‚
â”‚ â”‚  â€¢ Customer Type: Walking / Registered                                              â”‚ â”‚
â”‚ â”‚  â€¢ Inline Item Entry (Part, Qty, Rate)                                             â”‚ â”‚
â”‚ â”‚  â€¢ Discount & Tax Calculations                                                      â”‚ â”‚
â”‚ â”‚  â€¢ Payment Recording (Cash/Bank)                                                    â”‚ â”‚
â”‚ â”‚  â€¢ Status: Pending â†’ Partially Delivered â†’ Fully Delivered / On Hold / Cancelled   â”‚ â”‚
â”‚ â”‚  â€¢ Payment Status: Unpaid â†’ Partial â†’ Paid                                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚                                           â”‚
                     â–¼                                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 4A: DELIVERY                   â”‚    â”‚ PHASE 4B: RETURNS                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚       DELIVERY CHALLAN           â”‚ â”‚    â”‚ â”‚        SALES RETURNS             â”‚ â”‚
â”‚ â”‚                                  â”‚ â”‚    â”‚ â”‚                                  â”‚ â”‚
â”‚ â”‚  â€¢ Create Challan from Invoice   â”‚ â”‚    â”‚ â”‚  â€¢ Return against Invoice        â”‚ â”‚
â”‚ â”‚  â€¢ Add Items & Quantities        â”‚ â”‚    â”‚ â”‚  â€¢ Item-wise Return Qty          â”‚ â”‚
â”‚ â”‚  â€¢ Dispatch Details              â”‚ â”‚    â”‚ â”‚  â€¢ Stock Restoration             â”‚ â”‚
â”‚ â”‚    - Vehicle No                  â”‚ â”‚    â”‚ â”‚  â€¢ Credit Note Generation        â”‚ â”‚
â”‚ â”‚    - Driver Info                 â”‚ â”‚    â”‚ â”‚  â€¢ Status: Pending â†’ Processed   â”‚ â”‚
â”‚ â”‚    - Transporter                 â”‚ â”‚    â”‚ â”‚                                  â”‚ â”‚
â”‚ â”‚  â€¢ Delivery Confirmation         â”‚ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”‚    - Receiver Name               â”‚ â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â”‚    - Delivery Date               â”‚ â”‚
â”‚ â”‚  â€¢ Status: Ready â†’ Dispatched    â”‚ â”‚
â”‚ â”‚           â†’ Delivered            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 5: ACCOUNTS RECEIVABLE                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚     RECEIVABLE REMINDERS          â”‚  â”‚           DISTRIBUTOR AGING                  â”‚ â”‚
â”‚ â”‚                                   â”‚  â”‚                                              â”‚ â”‚
â”‚ â”‚  â€¢ Payment Recording              â”‚  â”‚  â€¢ Aging Buckets:                           â”‚ â”‚
â”‚ â”‚  â€¢ Due Date Rescheduling          â”‚  â”‚    - Current (0-30 days)                    â”‚ â”‚
â”‚ â”‚  â€¢ Reminder Sending (SMS/Email/   â”‚  â”‚    - 30-60 days                             â”‚ â”‚
â”‚ â”‚    WhatsApp)                      â”‚  â”‚    - 60-90 days                             â”‚ â”‚
â”‚ â”‚  â€¢ Promise-to-Pay Tracking        â”‚  â”‚    - 90-120 days                            â”‚ â”‚
â”‚ â”‚  â€¢ Overdue Management             â”‚  â”‚    - 120+ days                              â”‚ â”‚
â”‚ â”‚                                   â”‚  â”‚  â€¢ Credit Utilization %                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SUPPORTING: CUSTOMER PRICE STRUCTURES                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  â€¢ Customer Types: Retail / Wholesale / Market / Distributor                        â”‚ â”‚
â”‚ â”‚  â€¢ Price Categories: Price A / Price B / Price M / Price D                         â”‚ â”‚
â”‚ â”‚  â€¢ Standard & Special Discounts                                                      â”‚ â”‚
â”‚ â”‚  â€¢ Credit Limits & Credit Days                                                       â”‚ â”‚
â”‚ â”‚  â€¢ Minimum Order Value                                                               â”‚ â”‚
â”‚ â”‚  â€¢ Validity Period                                                                   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Module Components

### 1. Sales Inquiry

**Purpose**: Capture initial customer inquiries and perform part lookups before creating quotations.

**File**: `src/components/sales/SalesInquiry.tsx`

#### Data Structure

```typescript
interface Inquiry {
  id: string;
  inquiryNo: string;           // Auto-generated: INQ-XXX
  inquiryDate: string;
  customerName: string;
  customerEmail: string;
  customerPhone: string;
  subject: string;
  description: string;
  status: "New" | "In Progress" | "Quoted" | "Closed" | "Cancelled";
}

interface PartDetail {
  partNo: string;
  masterPart: string;
  brand: string;
  description: string;
  category: string;
  subCategory: string;
  uom: string;
  hsCode: string;
  weight: string;
  cost: string;
  priceA: string;              // Retail price
  priceB: string;              // Wholesale price
  priceM: string;              // Market price
  origin: string;
  grade: string;
  status: string;
  rackNo: string;
  reOrderLevel: string;
}
```

#### Part Lookup Feature

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PART INQUIRY LOOKUP                          â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Master Part #    â”‚  â”‚ Part No/SSP#             â”‚  â”‚ Clear â”‚ â”‚
â”‚  â”‚ [MP-001      â–¼] â”‚  â”‚ [Search by part...    â–¼] â”‚  â”‚       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â”‚ Dropdown                â”‚ Dropdown                  â”‚
â”‚           â–¼                         â–¼                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ MP-001           â”‚     â”‚ TEST001 - Brake Pad        â”‚       â”‚
â”‚  â”‚ MP-002           â”‚     â”‚ Brand: Test Brand          â”‚       â”‚
â”‚  â”‚ MP-003           â”‚     â”‚ Master: MP-001             â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ PART DETAILS (Read-Only)                                â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚ â”‚ Part No  â”‚ â”‚ Master   â”‚ â”‚ Brand  â”‚ â”‚ Category       â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ TEST001  â”‚ â”‚ MP-001   â”‚ â”‚ Bosch  â”‚ â”‚ Brakes         â”‚ â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚ â”‚ Price A  â”‚ â”‚ Price B  â”‚ â”‚ Price Mâ”‚ â”‚ Status         â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ Rs. 150  â”‚ â”‚ Rs. 140  â”‚ â”‚ Rs.130 â”‚ â”‚ Active         â”‚ â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Button Functions

| Button | Function | Action |
|--------|----------|--------|
| **Clear** | `handleClearSearch()` | Resets master part, part selection, and clears search fields |
| **New Inquiry** | `setShowForm(true)` | Opens inquiry creation form |
| **Submit** | `handleSubmit()` | Creates new inquiry with auto-generated number |
| **Cancel** | `handleCancel()` | Closes form and resets form data |
| **View** | `handleView(inquiry)` | Opens dialog to view inquiry details |
| **Convert to Quote** | `handleConvertToQuote(inquiry)` | Changes status to "Quoted" and triggers quotation creation |
| **Print** | `handlePrintInquiry(inquiry)` | Generates printable inquiry document |

#### Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    NEW      â”‚â”€â”€â”€â–¶â”‚ IN PROGRESS â”‚â”€â”€â”€â–¶â”‚   QUOTED    â”‚â”€â”€â”€â–¶â”‚   CLOSED    â”‚
â”‚  (Initial)  â”‚    â”‚  (Working)  â”‚    â”‚ (Converted) â”‚    â”‚  (Complete) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                                        â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ CANCELLED â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2. Sales Quotation

**Purpose**: Create and manage sales quotations with item selection and conversion to sales orders.

**File**: `src/components/sales/SalesQuotation.tsx`

#### Data Structure

```typescript
interface QuotationItem {
  id: string;
  partNo: string;
  description: string;
  quantity: number;
  unitPrice: number;
  total: number;
}

interface Quotation {
  id: string;
  quotationNo: string;          // Auto-generated: SQ-XXX
  customerName: string;
  customerEmail: string;
  customerPhone: string;
  customerAddress: string;
  date: string;
  validUntil: string;
  totalAmount: number;
  status: "draft" | "sent" | "accepted" | "rejected" | "expired";
  items: QuotationItem[];
  notes: string;
}
```

#### UI Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        QUOTATION FORM                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚Quotation Noâ”‚ â”‚Quotation Dt â”‚ â”‚ Valid Until â”‚ â”‚ Status           â”‚   â”‚
â”‚  â”‚ SQ-001     â”‚ â”‚ 2025-01-15  â”‚ â”‚ 2025-02-15  â”‚ â”‚ [Draft       â–¼] â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚Cust. Name  â”‚ â”‚ Email       â”‚ â”‚ Phone       â”‚ â”‚ Address          â”‚   â”‚
â”‚  â”‚            â”‚ â”‚             â”‚ â”‚             â”‚ â”‚                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  SELECT ITEMS                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ [ğŸ” Search parts by number or description...]                       â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ â˜ Part No    â”‚ Description          â”‚ Stock   â”‚ Price              â”‚â”‚
â”‚  â”‚ â˜‘ BP-001     â”‚ Brake Pad Front      â”‚ 50 pcs  â”‚ Rs 1,500.00        â”‚â”‚
â”‚  â”‚ â˜ AF-002     â”‚ Air Filter Premium   â”‚ 30 pcs  â”‚ Rs 850.00          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  SELECTED ITEMS                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚Part No â”‚ Description     â”‚ Qty  â”‚ Unit     â”‚ Total     â”‚ Actions  â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚BP-001  â”‚ Brake Pad Front â”‚ [2]  â”‚ Rs 1,500 â”‚ Rs 3,000  â”‚ [ğŸ—‘]     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                          GRAND TOTAL: Rs 3,000.00       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Notes: [                                                             ] â”‚
â”‚                                                                         â”‚
â”‚                                    [Cancel]  [Save Quotation]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Button Functions

| Button | Function | Action |
|--------|----------|--------|
| **New Quotation** | `handleNewQuotation()` | Opens form with auto-generated quotation number |
| **Edit** | `handleEditQuotation(quotation)` | Loads quotation data into form for editing |
| **Delete** | `openDeleteDialog(quotation)` | Opens delete confirmation dialog |
| **Convert to Order** | `openConvertDialog(quotation)` | Opens conversion confirmation, changes status to "accepted" |
| **Print** | `handlePrintQuotation(quotation)` | Generates and prints quotation document |
| **Save Quotation** | `handleSubmit()` | Validates and saves quotation (create/update) |
| **Cancel** | Closes form | Resets form and returns to list view |

#### Status Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DRAFT  â”‚â”€â”€â”€â–¶â”‚  SENT  â”‚â”€â”€â”€â–¶â”‚ ACCEPTED â”‚ â”€â”€â–¶ Convert to Invoice
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”œâ”€â”€â”€â”€â”€â”€â”€â–¶ REJECTED
                   â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â–¶ EXPIRED (auto, after validUntil date)
```

---

### 3. Sales Invoice

**Purpose**: Create sales invoices with automatic stock reservation and partial delivery tracking.

**File**: `src/components/sales/SalesInvoice.tsx`

#### Data Structures

```typescript
// From src/types/invoice.ts
interface Invoice {
  id: string;
  invoiceNo: string;           // Format: INV-YYYY-XXX
  invoiceDate: string;
  customerType: "walking" | "registered";
  customerId: string;
  customerName: string;
  salesPerson: string;
  items: InvoiceItem[];
  subtotal: number;
  overallDiscount: number;
  overallDiscountType: "percent" | "fixed";
  tax: number;
  grandTotal: number;
  paidAmount: number;
  status: InvoiceStatus;
  paymentStatus: "unpaid" | "partial" | "paid";
  deliveryLog: DeliveryLogEntry[];
  holdReason?: string;
  holdSince?: string;
  createdAt: string;
  updatedAt: string;
}

interface InvoiceItem {
  id: string;
  partId: string;
  partNo: string;
  description: string;
  orderedQty: number;
  deliveredQty: number;
  pendingQty: number;
  unitPrice: number;
  discount: number;
  discountType: "percent" | "fixed";
  lineTotal: number;
  grade: "A" | "B" | "C" | "D";
  brand?: string;
  machineModel?: string;
  machineRequiredQty?: number;
}

type InvoiceStatus = 
  | "draft" 
  | "pending" 
  | "partially_delivered" 
  | "fully_delivered" 
  | "on_hold" 
  | "cancelled";
```

#### Stock Reservation Logic

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        STOCK RESERVATION FLOW                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                      â”‚
â”‚    â”‚  AVAILABLE   â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚    â”‚    STOCK     â”‚                                                    â”‚â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                    â”‚â”‚
â”‚           â”‚                                                            â”‚â”‚
â”‚           â”‚ Create Invoice                                             â”‚â”‚
â”‚           â–¼                                                            â”‚â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                    â”‚â”‚
â”‚    â”‚   RESERVED   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚â”‚
â”‚    â”‚    STOCK     â”‚  Cancel Invoice                                    â”‚â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  (Stock returns to Available)                      â”‚â”‚
â”‚           â”‚                                                            â”‚â”‚
â”‚           â”‚ Record Delivery                                            â”‚â”‚
â”‚           â–¼                                                            â”‚â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                    â”‚â”‚
â”‚    â”‚   DELIVERED  â”‚                                                    â”‚â”‚
â”‚    â”‚  (OUT STOCK) â”‚                                                    â”‚â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                    â”‚â”‚
â”‚                                                                         â”‚
â”‚  Formula:                                                               â”‚
â”‚  availableQty = stockQty - reservedQty                                 â”‚
â”‚  pendingQty = orderedQty - deliveredQty                                â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Invoice Form Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         NEW SALES INVOICE                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  CUSTOMER DETAILS                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Customer Type   â”‚ â”‚ Customer Name                                  â”‚ â”‚
â”‚  â”‚ â—‹ Walking       â”‚ â”‚ [Select customer...                        â–¼] â”‚ â”‚
â”‚  â”‚ â— Registered    â”‚ â”‚                                                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  LINE ITEMS                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ #  â”‚ Part Selection      â”‚ Qty     â”‚ Rate    â”‚ Amount    â”‚ Action â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ 1  â”‚ [BP-001        â–¼]  â”‚ [5]     â”‚ 1,500   â”‚ 7,500     â”‚ [ğŸ—‘][â„¹]â”‚ â”‚
â”‚  â”‚ 2  â”‚ [AF-002        â–¼]  â”‚ [10]    â”‚ 850     â”‚ 8,500     â”‚ [ğŸ—‘][â„¹]â”‚ â”‚
â”‚  â”‚ +  â”‚ [+ Add Item]        â”‚         â”‚         â”‚           â”‚        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                         â”‚
â”‚  [Alt Parts] [Alt Brands]                Total Amount:     Rs 16,000   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PAYMENT SECTION                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Discount  â”‚ â”‚ Received  â”‚ â”‚ Received     â”‚ â”‚ Tax Type             â”‚ â”‚
â”‚  â”‚ [500]     â”‚ â”‚ Cash      â”‚ â”‚ Bank         â”‚ â”‚ [Without GST     â–¼] â”‚ â”‚
â”‚  â”‚           â”‚ â”‚ [5,000]   â”‚ â”‚ [0]          â”‚ â”‚                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                         â”‚
â”‚  Amount After Discount: Rs 15,500     Due Amount: Rs 10,500            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Delivered To: [                    ]    Remarks: [                   ] â”‚
â”‚                                                                         â”‚
â”‚                              [Cancel]  [Create Invoice]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Button Functions

| Button | Function | Action |
|--------|----------|--------|
| **New Invoice** | `setShowNewInvoice(true)` | Opens new invoice form |
| **+ Add Item** | `handleAddNewItem()` | Adds new inline item row to invoice |
| **Remove Item** | `handleRemoveInlineItem(id)` | Removes item from invoice |
| **Alt Parts** | `setShowAlternateParts(true)` | Opens alternate parts dialog |
| **Alt Brands** | `setShowAlternateBrands(true)` | Opens alternate brands dialog |
| **Create Invoice** | `handleCreateInvoice()` | Validates, creates invoice, reserves stock |
| **Cancel (Form)** | `resetForm()` | Resets form and closes |
| **View** | Opens view dialog | Shows complete invoice details |
| **Delivery** | Opens `InvoiceDeliveryLog` | Record partial/full delivery |
| **Print** | Triggers print | Generates printable invoice |
| **Hold** | Opens hold dialog | Puts invoice on hold with reason |
| **Release Hold** | `handleReleaseHold(invoice)` | Releases invoice from hold status |
| **Cancel Invoice** | Opens cancel confirmation | Cancels invoice, returns stock to available |

#### Status & Payment Badges

| Status | Badge Color | Description |
|--------|-------------|-------------|
| `draft` | Gray | Invoice not yet saved |
| `pending` | Blue | Awaiting delivery |
| `partially_delivered` | Orange | Some items delivered |
| `fully_delivered` | Green | All items delivered |
| `on_hold` | Yellow | Temporarily suspended |
| `cancelled` | Red | Invoice cancelled |

| Payment | Badge Color | Description |
|---------|-------------|-------------|
| `unpaid` | Red | No payment received |
| `partial` | Orange | Partial payment received |
| `paid` | Green | Fully paid |

#### Delivery Log Modal

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     DELIVERY LOG - INV-2025-001                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  SUMMARY                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚ Total       â”‚  â”‚ Delivered   â”‚  â”‚ Pending     â”‚                      â”‚
â”‚  â”‚ Ordered: 15 â”‚  â”‚ Qty: 5      â”‚  â”‚ Qty: 10     â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RECORD NEW DELIVERY                                                     â”‚
â”‚  Challan No: [DC-2025-001]  Delivered By: [John       ]                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚Part No â”‚ Description         â”‚ Pending â”‚ Deliver   â”‚                 â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
â”‚  â”‚BP-001  â”‚ Brake Pad           â”‚ 5       â”‚ [3]       â”‚                 â”‚
â”‚  â”‚AF-002  â”‚ Air Filter          â”‚ 5       â”‚ [5]       â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚  Remarks: [                                           ]                 â”‚
â”‚                                              [Record Delivery]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  DELIVERY HISTORY                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ DC-2025-001 | 2025-01-15 | 5 items | By: Admin                      â”‚â”‚
â”‚  â”‚   BP-001: 2 pcs, AF-002: 3 pcs                                      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4. Sales Returns

**Purpose**: Process return orders against sales invoices with stock restoration.

**File**: `src/components/sales/SalesReturns.tsx`

#### Data Structure

```typescript
interface ReturnItem {
  id: string;
  partNo: string;
  itemName: string;
  brand: string;
  model: string;
  uom: string;
  returnQty: number;
  price: number;
  total: number;
}

interface SalesReturn {
  id: string;
  invoiceNo: string;           // Return invoice number
  returnDate: string;
  customerName: string;
  store: string;
  remarks: string;
  totalAmount: number;
  discount: number;
  amountAfterDiscount: number;
  saleType: string;
  items: ReturnItem[];
  originalInvoiceNo?: string;  // Reference to original sale invoice
}
```

#### Button Functions

| Button | Function | Action |
|--------|----------|--------|
| **Search** | `handleSearch()` | Applies filters to returns list |
| **View** | `handleViewReturn(return)` | Opens return details dialog |
| **View Original** | `handleViewOriginalInvoice(return)` | Shows original invoice reference |
| **Delete** | `handleDeleteClick(return)` | Opens delete confirmation |
| **Print** | `handlePrint()` | Generates printable return invoice |
| **Select All** | `handleSelectAll(checked)` | Selects all visible returns |

#### Filter Options

- **Item Type**: All / Single / Set
- **Item**: Select specific item
- **Customer**: Select customer
- **Customer Name**: Text search

---

### 5. Delivery Challan

**Purpose**: Manage delivery dispatch and confirmation with vehicle and driver tracking.

**File**: `src/components/sales/DeliveryChallan.tsx`

#### Data Structure

```typescript
interface ChallanItem {
  id: string;
  partNo: string;
  description: string;
  quantity: number;
  remarks: string;
}

interface DeliveryChallanType {
  id: string;
  challanNo: string;           // Format: DC-YYYY-XXX
  orderNo: string;             // Reference to sales order
  customerName: string;
  customerPhone: string;
  deliveryAddress: string;
  deliveryDate: string;
  createdDate: string;
  dispatchedDate: string | null;
  deliveredDate: string | null;
  totalPackages: number;
  totalWeight: number;
  items: ChallanItem[];
  notes: string;
  status: "draft" | "ready" | "dispatched" | "delivered" | "pending";
  // Dispatch details
  vehicleNo: string;
  vehicleType: string;
  driverName: string;
  driverPhone: string;
  transporter: string;
  dispatchedBy: string;
  // Delivery details
  receiverName: string;
  confirmedBy: string;
  deliveryNotes: string;
}
```

#### Status Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   DRAFT     â”‚â”€â”€â”€â–¶â”‚    READY    â”‚â”€â”€â”€â–¶â”‚ DISPATCHED  â”‚â”€â”€â”€â–¶â”‚  DELIVERED  â”‚
â”‚  (Created)  â”‚    â”‚ (Prepared)  â”‚    â”‚ (In Transit)â”‚    â”‚ (Confirmed) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ PENDING (awaiting items)
```

#### Dispatch Dialog

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DISPATCH CHALLAN                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Dispatch Date: [2025-01-15]                                            â”‚
â”‚                                                                         â”‚
â”‚  Vehicle Type: [Truck        â–¼]   Vehicle No: [ABC-1234          ]     â”‚
â”‚  Driver Name:  [                ]   Driver Phone: [               ]     â”‚
â”‚  Transporter:  [                ]   Dispatched By: [              ]     â”‚
â”‚                                                                         â”‚
â”‚  Notes: [                                                             ] â”‚
â”‚                                                                         â”‚
â”‚                                    [Cancel]  [Confirm Dispatch]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Delivery Confirmation Dialog

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       CONFIRM DELIVERY                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Delivery Date: [2025-01-16]                                            â”‚
â”‚                                                                         â”‚
â”‚  Receiver Name:  [                ]   Confirmed By: [              ]    â”‚
â”‚                                                                         â”‚
â”‚  ITEMS DELIVERED                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚Part No â”‚ Description         â”‚ Delivered â”‚ Remarks              â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚BP-001  â”‚ Brake Pad           â”‚ [5]       â”‚ [                  ] â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”‚  Delivery Notes: [                                                    ] â”‚
â”‚                                                                         â”‚
â”‚                                    [Cancel]  [Confirm Delivery]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Button Functions

| Button | Function | Action |
|--------|----------|--------|
| **New Challan** | `setIsNewChallanOpen(true)` | Opens new challan form |
| **+ Add Item** | `handleAddItem()` | Adds new item row to challan |
| **Remove Item** | `handleRemoveItem(id)` | Removes item from challan |
| **Create Challan** | `handleCreateChallan()` | Validates and creates challan |
| **Dispatch** | `handleOpenDispatch(challan)` | Opens dispatch dialog |
| **Confirm Dispatch** | `handleConfirmDispatch()` | Updates status to dispatched |
| **Deliver** | `handleOpenDeliver(challan)` | Opens delivery confirmation |
| **Confirm Delivery** | `handleConfirmDelivery()` | Updates status to delivered |
| **Print** | `handlePrint(challan)` | Generates printable challan |
| **List/Card View** | `setViewMode("list"/"card")` | Toggles between view modes |

---

### 6. Customer Price Structures

**Purpose**: Define and manage customer-specific pricing tiers, discounts, and credit terms.

**File**: `src/components/sales/CustomerPriceStructures.tsx`

#### Data Structure

```typescript
type CustomerType = "retail" | "wholesale" | "market" | "distributor";

interface PriceStructure {
  id: string;
  customerName: string;
  customerType: CustomerType;
  priceCategory: string;        // "Price A (Retail)" | "Price B (Wholesale)" etc.
  standardDiscount: number;     // Percentage
  specialDiscount: number;      // Additional percentage
  creditLimit: number;          // Maximum credit amount
  creditDays: number;           // Payment terms
  minOrderValue: number;        // Minimum order amount
  effectiveFrom: string;
  effectiveTo: string;
  status: "active" | "inactive";
  notes: string;
}
```

#### Price Categories

| Category | Label | Default Customer Type |
|----------|-------|----------------------|
| Price A | Retail | Retail customers |
| Price B | Wholesale | Wholesale buyers |
| Price M | Market | Market vendors |
| Price D | Distributor | Distributors |

#### Button Functions

| Button | Function | Action |
|--------|----------|--------|
| **Add Price Structure** | `setIsAddDialogOpen(true)` | Opens add dialog with reset form |
| **Edit** | `handleEdit(structure)` | Loads structure into edit form |
| **Delete** | `handleDeleteClick(structure)` | Opens delete confirmation |
| **Bulk Update** | `setIsBulkUpdateOpen(true)` | Opens bulk update dialog |
| **Create** | `handleCreate()` | Creates new price structure |
| **Update** | `handleUpdate()` | Updates existing structure |
| **Export** | `handleExport()` | Exports to CSV file |
| **Print** | `handlePrint()` | Generates printable report |

#### Bulk Update Feature

Allows updating all customers of a specific type at once:
- Select customer type
- Set new price category
- Set discount percentage
- Set credit days

---

### 7. Distributor Aging Report

**Purpose**: Analyze accounts receivable by aging buckets to manage credit risk.

**File**: `src/components/sales/DistributorAging.tsx`

#### Data Structure

```typescript
interface DistributorAgingData {
  id: string;
  customerName: string;
  customerCode: string;
  type: "distributor" | "wholesale" | "market";
  totalOutstanding: number;
  current: number;              // 0-30 days
  days30: number;               // 30-60 days
  days60: number;               // 60-90 days
  days90: number;               // 90-120 days
  days120Plus: number;          // Over 120 days
  creditLimit: number;
}
```

#### Aging Buckets Visualization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        AGING DISTRIBUTION                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚   CURRENT      â”‚  30-60     â”‚  60-90     â”‚  90-120    â”‚   120+     â”‚â”‚
â”‚  â”‚   (Green)      â”‚  (Blue)    â”‚  (Yellow)  â”‚  (Orange)  â”‚   (Red)    â”‚â”‚
â”‚  â”‚     45%        â”‚    25%     â”‚    15%     â”‚    10%     â”‚    5%      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                         â”‚
â”‚  â— Current    â— 30-60 Days    â— 60-90 Days    â— 90-120 Days    â— 120+ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Credit Utilization

```typescript
// Formula
creditUtilization = (totalOutstanding / creditLimit) * 100

// Color coding
if (utilization >= 90%) â†’ Red (High Risk)
if (utilization >= 75%) â†’ Orange (Warning)
if (utilization < 75%)  â†’ Green (Safe)
```

#### Button Functions

| Button | Function | Action |
|--------|----------|--------|
| **Search** | Filters data | Filters by customer name/code |
| **Filter Type** | `setFilterType(type)` | Filters by customer type |
| **Sort By** | `setSortBy(field)` | Sorts by selected column |
| **From/To Date** | Sets date range | Filters by date range |
| **Export** | `handleExport()` | Exports to CSV |
| **Print** | `handlePrint()` | Generates printable aging report |

---

### 8. Receivable Reminders

**Purpose**: Send payment reminders, record payments, and reschedule due dates.

**File**: `src/components/sales/ReceivableReminders.tsx`

#### Data Structure

```typescript
interface Receivable {
  id: string;
  invoiceNo: string;
  invoiceDate: string;
  customerName: string;
  customerCode: string;
  balance: number;
  paidAmount: number;
  dueDate: string;
  originalDueDate: string;
  daysOverdue: number;
  remindersSent: number;
  promisedPayments: number;
  status: "pending" | "overdue" | "reminded" | "rescheduled" | "disputed";
}
```

#### Reminder Templates

| Template | Purpose | Tone |
|----------|---------|------|
| Friendly Reminder | First reminder | Polite |
| Overdue Notice | Past due date | Firm |
| Final Notice | Last warning | Urgent |

#### Button Functions

| Button | Function | Action |
|--------|----------|--------|
| **Payment** | `openPaymentDialog(receivable)` | Opens payment recording dialog |
| **Reschedule** | `openRescheduleDialog(receivable)` | Opens date rescheduling dialog |
| **Remind** | `openReminderDialog(receivable)` | Opens reminder sending dialog |
| **Send Bulk Reminder** | `openReminderDialog()` | Sends reminders to selected items |
| **Record Payment** | `handleRecordPayment()` | Records payment, updates balance |
| **Reschedule** | `handleReschedule()` | Updates due date, resets overdue |
| **Send Reminder** | `handleSendReminder()` | Sends reminder via selected channel |
| **Export** | `handleExport()` | Exports receivables to CSV |
| **Select All** | `handleSelectAll(checked)` | Selects all visible receivables |

#### Reminder Channels

- **SMS**: Text message
- **Email**: Email notification
- **WhatsApp**: WhatsApp message

---

## Inter-Module Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           MODULE RELATIONSHIP DIAGRAM                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  PARTS MODULE    â”‚
                    â”‚ (Item Master)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ Part Data (partNo, description, prices)
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SALES INQUIRY   â”‚â”€â”€â”€â–¶â”‚           SALES QUOTATION               â”‚â”€â”€â”€â–¶â”‚   SALES INVOICE  â”‚
â”‚                 â”‚    â”‚                                         â”‚    â”‚                  â”‚
â”‚ - Part Lookup   â”‚    â”‚ - Item Selection                        â”‚    â”‚ - Stock Reserve  â”‚
â”‚ - Customer Info â”‚    â”‚ - Price Calculation                     â”‚    â”‚ - Inline Items   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                                â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                        â”‚                                                       â”‚
                        â–¼                                                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  SALES RETURNS   â”‚                               â”‚  DELIVERY CHALLAN    â”‚
              â”‚                  â”‚                               â”‚                      â”‚
              â”‚ - Original Inv   â”‚                               â”‚ - Partial Delivery   â”‚
              â”‚ - Stock Return   â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ - Dispatch Tracking  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   Return after delivery       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                               â”‚
                                                                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                               ACCOUNTS RECEIVABLE                                         â”‚
â”‚                                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   DISTRIBUTOR AGING          â”‚          â”‚        RECEIVABLE REMINDERS              â”‚ â”‚
â”‚  â”‚                              â”‚          â”‚                                          â”‚ â”‚
â”‚  â”‚ - Aging Analysis             â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ - Payment Recording                      â”‚ â”‚
â”‚  â”‚ - Credit Utilization         â”‚          â”‚ - Due Date Rescheduling                  â”‚ â”‚
â”‚  â”‚ - Risk Assessment            â”‚          â”‚ - Reminder Sending                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ Price Lookup
                                    â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   CUSTOMER PRICE STRUCTURES       â”‚
                    â”‚                                   â”‚
                    â”‚ - Retail / Wholesale / Market /   â”‚
                    â”‚   Distributor pricing             â”‚
                    â”‚ - Credit limits & terms           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Diagrams

### Invoice Creation Flow

```
User Input                    Processing                      Output
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Select Customer â”‚â”€â”€â”€â”€â–¶â”‚ Load Customer Data   â”‚â”€â”€â”€â”€â–¶â”‚ Display Balance     â”‚
â”‚ Type            â”‚     â”‚ (registered/walking) â”‚     â”‚ Credit Info         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Add Line Items  â”‚â”€â”€â”€â”€â–¶â”‚ Validate Stock       â”‚â”€â”€â”€â”€â–¶â”‚ Show Available Qty  â”‚
â”‚ (Part, Qty)     â”‚     â”‚ Check Availability   â”‚     â”‚ Grade & Price       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Enter Payment   â”‚â”€â”€â”€â”€â–¶â”‚ Calculate Totals     â”‚â”€â”€â”€â”€â–¶â”‚ Display Summary     â”‚
â”‚ (Discount, Cash)â”‚     â”‚ (Subtotal, Due)      â”‚     â”‚ (Total, Due Amount) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Create Invoice  â”‚â”€â”€â”€â”€â–¶â”‚ 1. Generate Inv No   â”‚â”€â”€â”€â”€â–¶â”‚ Invoice Created     â”‚
â”‚                 â”‚     â”‚ 2. Reserve Stock     â”‚     â”‚ Stock Reserved      â”‚
â”‚                 â”‚     â”‚ 3. Save to State     â”‚     â”‚ Toast Notification  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Delivery Recording Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Open Delivery   â”‚â”€â”€â”€â”€â–¶â”‚ Load Invoice Items   â”‚â”€â”€â”€â”€â–¶â”‚ Display Pending Qty â”‚
â”‚ Log Dialog      â”‚     â”‚ Show Pending         â”‚     â”‚ For Each Item       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Enter Delivery  â”‚â”€â”€â”€â”€â–¶â”‚ Validate Qty <=      â”‚â”€â”€â”€â”€â–¶â”‚ Calculate New       â”‚
â”‚ Quantities      â”‚     â”‚ Pending Qty          â”‚     â”‚ Delivered/Pending   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Record Delivery â”‚â”€â”€â”€â”€â–¶â”‚ 1. Update Items      â”‚â”€â”€â”€â”€â–¶â”‚ Delivery Recorded   â”‚
â”‚                 â”‚     â”‚ 2. Add to Log        â”‚     â”‚ Status Updated      â”‚
â”‚                 â”‚     â”‚ 3. Update Status     â”‚     â”‚ (Partial/Full)      â”‚
â”‚                 â”‚     â”‚ 4. Stock: Reservedâ†’  â”‚     â”‚ Stock Moved to OUT  â”‚
â”‚                 â”‚     â”‚    OUT               â”‚     â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Button Functions Reference

### Quick Reference Table

| Component | Button | Handler Function | Key Action |
|-----------|--------|------------------|------------|
| **SalesInquiry** | New Inquiry | `setShowForm(true)` | Open form |
| | Submit | `handleSubmit()` | Create inquiry |
| | View | `handleView(inquiry)` | Open details dialog |
| | Convert | `handleConvertToQuote(inquiry)` | Change to Quoted status |
| | Print | `handlePrintInquiry(inquiry)` | Print document |
| **SalesQuotation** | New Quotation | `handleNewQuotation()` | Reset form, open |
| | Save | `handleSubmit()` | Create/update quotation |
| | Edit | `handleEditQuotation(quotation)` | Load into form |
| | Delete | `openDeleteDialog(quotation)` | Confirm deletion |
| | Convert | `openConvertDialog(quotation)` | Convert to order |
| | Print | `handlePrintQuotation(quotation)` | Print document |
| **SalesInvoice** | New Invoice | `setShowNewInvoice(true)` | Open form |
| | Add Item | `handleAddNewItem()` | Add line item |
| | Create | `handleCreateInvoice()` | Create & reserve stock |
| | View | Opens dialog | Show invoice details |
| | Delivery | Opens `InvoiceDeliveryLog` | Record delivery |
| | Hold | Opens dialog | Put on hold |
| | Release | `handleReleaseHold(invoice)` | Release from hold |
| | Cancel | Opens confirm | Cancel & return stock |
| **SalesReturns** | Search | `handleSearch()` | Apply filters |
| | View | `handleViewReturn(return)` | Open details |
| | Delete | `handleDeleteClick(return)` | Confirm delete |
| | Print | `handlePrint()` | Print return |
| **DeliveryChallan** | New Challan | `setIsNewChallanOpen(true)` | Open form |
| | Add Item | `handleAddItem()` | Add line item |
| | Create | `handleCreateChallan()` | Create challan |
| | Dispatch | `handleOpenDispatch(challan)` | Open dispatch dialog |
| | Deliver | `handleOpenDeliver(challan)` | Open delivery confirm |
| | Print | `handlePrint(challan)` | Print challan |
| **CustomerPriceStructures** | Add | `setIsAddDialogOpen(true)` | Open add form |
| | Edit | `handleEdit(structure)` | Load into form |
| | Delete | `handleDeleteClick(structure)` | Confirm delete |
| | Bulk Update | `setIsBulkUpdateOpen(true)` | Open bulk dialog |
| | Export | `handleExport()` | Export to CSV |
| | Print | `handlePrint()` | Print report |
| **DistributorAging** | Export | `handleExport()` | Export to CSV |
| | Print | `handlePrint()` | Print aging report |
| **ReceivableReminders** | Payment | `openPaymentDialog(item)` | Record payment |
| | Reschedule | `openRescheduleDialog(item)` | Change due date |
| | Remind | `openReminderDialog(item)` | Send reminder |
| | Export | `handleExport()` | Export to CSV |

---

## State Management

### Current Implementation

All modules use React's `useState` hook for local state management:

```typescript
// Example: SalesInvoice state
const [invoices, setInvoices] = useState<Invoice[]>(mockInvoices);
const [searchTerm, setSearchTerm] = useState("");
const [filterStatus, setFilterStatus] = useState<string>("all");
const [showNewInvoice, setShowNewInvoice] = useState(false);
// ... more state variables
```

### State Categories

1. **Data State**: Main data arrays (invoices, quotations, etc.)
2. **UI State**: Dialog visibility, view modes, active tabs
3. **Form State**: Form field values for create/edit operations
4. **Filter State**: Search terms and filter selections
5. **Selection State**: Selected items for batch operations

---

## Database Schema (Future)

### Tables

```sql
-- Inquiries Table
CREATE TABLE inquiries (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  inquiry_no VARCHAR(20) UNIQUE NOT NULL,
  inquiry_date DATE NOT NULL,
  customer_name VARCHAR(255) NOT NULL,
  customer_email VARCHAR(255),
  customer_phone VARCHAR(50),
  subject VARCHAR(500),
  description TEXT,
  status VARCHAR(20) DEFAULT 'New',
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Quotations Table
CREATE TABLE quotations (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  quotation_no VARCHAR(20) UNIQUE NOT NULL,
  customer_name VARCHAR(255) NOT NULL,
  customer_email VARCHAR(255),
  customer_phone VARCHAR(50),
  customer_address TEXT,
  quotation_date DATE NOT NULL,
  valid_until DATE,
  total_amount DECIMAL(15,2) DEFAULT 0,
  status VARCHAR(20) DEFAULT 'draft',
  notes TEXT,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Quotation Items Table
CREATE TABLE quotation_items (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  quotation_id UUID REFERENCES quotations(id) ON DELETE CASCADE,
  part_no VARCHAR(50) NOT NULL,
  description TEXT,
  quantity INTEGER NOT NULL DEFAULT 1,
  unit_price DECIMAL(15,2) NOT NULL,
  total DECIMAL(15,2) NOT NULL
);

-- Invoices Table
CREATE TABLE invoices (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  invoice_no VARCHAR(20) UNIQUE NOT NULL,
  invoice_date DATE NOT NULL,
  customer_type VARCHAR(20) NOT NULL,
  customer_id UUID REFERENCES customers(id),
  customer_name VARCHAR(255) NOT NULL,
  sales_person VARCHAR(255),
  subtotal DECIMAL(15,2) DEFAULT 0,
  overall_discount DECIMAL(15,2) DEFAULT 0,
  overall_discount_type VARCHAR(10) DEFAULT 'percent',
  tax DECIMAL(15,2) DEFAULT 0,
  grand_total DECIMAL(15,2) DEFAULT 0,
  paid_amount DECIMAL(15,2) DEFAULT 0,
  status VARCHAR(30) DEFAULT 'pending',
  payment_status VARCHAR(20) DEFAULT 'unpaid',
  hold_reason TEXT,
  hold_since DATE,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Invoice Items Table
CREATE TABLE invoice_items (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  invoice_id UUID REFERENCES invoices(id) ON DELETE CASCADE,
  part_id UUID REFERENCES parts(id),
  part_no VARCHAR(50) NOT NULL,
  description TEXT,
  ordered_qty INTEGER NOT NULL,
  delivered_qty INTEGER DEFAULT 0,
  pending_qty INTEGER NOT NULL,
  unit_price DECIMAL(15,2) NOT NULL,
  discount DECIMAL(15,2) DEFAULT 0,
  discount_type VARCHAR(10) DEFAULT 'percent',
  line_total DECIMAL(15,2) NOT NULL,
  grade VARCHAR(5),
  brand VARCHAR(100),
  machine_model VARCHAR(100)
);

-- Delivery Log Table
CREATE TABLE delivery_log (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  invoice_id UUID REFERENCES invoices(id) ON DELETE CASCADE,
  delivery_date DATE NOT NULL,
  challan_no VARCHAR(50) NOT NULL,
  delivered_by VARCHAR(255),
  remarks TEXT,
  created_at TIMESTAMP DEFAULT NOW()
);

-- Delivery Log Items Table
CREATE TABLE delivery_log_items (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  delivery_log_id UUID REFERENCES delivery_log(id) ON DELETE CASCADE,
  part_id UUID NOT NULL,
  part_no VARCHAR(50) NOT NULL,
  quantity INTEGER NOT NULL
);

-- Sales Returns Table
CREATE TABLE sales_returns (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  invoice_no VARCHAR(20) UNIQUE NOT NULL,
  return_date DATE NOT NULL,
  customer_name VARCHAR(255) NOT NULL,
  store VARCHAR(255),
  remarks TEXT,
  total_amount DECIMAL(15,2) DEFAULT 0,
  discount DECIMAL(15,2) DEFAULT 0,
  amount_after_discount DECIMAL(15,2) DEFAULT 0,
  sale_type VARCHAR(50),
  original_invoice_no VARCHAR(20),
  created_at TIMESTAMP DEFAULT NOW()
);

-- Return Items Table
CREATE TABLE return_items (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  return_id UUID REFERENCES sales_returns(id) ON DELETE CASCADE,
  part_no VARCHAR(50) NOT NULL,
  item_name VARCHAR(255) NOT NULL,
  brand VARCHAR(100),
  model VARCHAR(100),
  uom VARCHAR(20),
  return_qty INTEGER NOT NULL,
  price DECIMAL(15,2) NOT NULL,
  total DECIMAL(15,2) NOT NULL
);

-- Delivery Challans Table
CREATE TABLE delivery_challans (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  challan_no VARCHAR(20) UNIQUE NOT NULL,
  order_no VARCHAR(20),
  customer_name VARCHAR(255) NOT NULL,
  customer_phone VARCHAR(50),
  delivery_address TEXT,
  delivery_date DATE,
  created_date DATE NOT NULL DEFAULT CURRENT_DATE,
  dispatched_date DATE,
  delivered_date DATE,
  total_packages INTEGER DEFAULT 0,
  total_weight DECIMAL(10,2) DEFAULT 0,
  notes TEXT,
  status VARCHAR(20) DEFAULT 'draft',
  vehicle_no VARCHAR(50),
  vehicle_type VARCHAR(50),
  driver_name VARCHAR(255),
  driver_phone VARCHAR(50),
  transporter VARCHAR(255),
  dispatched_by VARCHAR(255),
  receiver_name VARCHAR(255),
  confirmed_by VARCHAR(255),
  delivery_notes TEXT,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Challan Items Table
CREATE TABLE challan_items (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  challan_id UUID REFERENCES delivery_challans(id) ON DELETE CASCADE,
  part_no VARCHAR(50) NOT NULL,
  description TEXT,
  quantity INTEGER NOT NULL,
  remarks TEXT
);

-- Customer Price Structures Table
CREATE TABLE customer_price_structures (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  customer_name VARCHAR(255) NOT NULL,
  customer_type VARCHAR(20) NOT NULL,
  price_category VARCHAR(50) NOT NULL,
  standard_discount DECIMAL(5,2) DEFAULT 0,
  special_discount DECIMAL(5,2) DEFAULT 0,
  credit_limit DECIMAL(15,2) DEFAULT 0,
  credit_days INTEGER DEFAULT 30,
  min_order_value DECIMAL(15,2) DEFAULT 0,
  effective_from DATE NOT NULL,
  effective_to DATE,
  status VARCHAR(20) DEFAULT 'active',
  notes TEXT,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Receivables Table
CREATE TABLE receivables (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  invoice_no VARCHAR(20) NOT NULL,
  invoice_date DATE NOT NULL,
  customer_name VARCHAR(255) NOT NULL,
  customer_code VARCHAR(50),
  balance DECIMAL(15,2) NOT NULL,
  paid_amount DECIMAL(15,2) DEFAULT 0,
  due_date DATE NOT NULL,
  original_due_date DATE NOT NULL,
  days_overdue INTEGER DEFAULT 0,
  reminders_sent INTEGER DEFAULT 0,
  promised_payments INTEGER DEFAULT 0,
  status VARCHAR(20) DEFAULT 'pending',
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

---

## Notification System

### Toast Notifications Used

| Module | Event | Toast Type | Message |
|--------|-------|------------|---------|
| Inquiry | Created | Success | "Inquiry {no} created" |
| Inquiry | Converted | Success | "Converted to quotation" |
| Quotation | Created | Success | "Quotation {no} created" |
| Quotation | Deleted | Success | "Quotation deleted" |
| Quotation | Converted | Success | "Converted to sales order" |
| Invoice | Created | Success | "Invoice created. Items moved to RESERVED" |
| Invoice | Delivery | Success | "Delivery recorded. Items moved from RESERVED to OUT" |
| Invoice | Hold | Info | "Invoice put on hold" |
| Invoice | Released | Success | "Hold released" |
| Invoice | Cancelled | Warning | "Invoice cancelled. Stock returned" |
| Challan | Created | Success | "Challan created" |
| Challan | Dispatched | Success | "Challan dispatched" |
| Challan | Delivered | Success | "Delivery confirmed" |
| Return | Deleted | Success | "Return deleted" |
| Pricing | Created | Success | "Price structure created" |
| Pricing | Updated | Success | "Price structure updated" |
| Pricing | Bulk Update | Success | "All {type} customers updated" |
| Receivables | Payment | Success | "Payment recorded" |
| Receivables | Rescheduled | Success | "Due date rescheduled" |
| Receivables | Reminder | Success | "Reminder sent to {n} customers" |

---

## Print Document Templates

All printable documents follow a consistent format:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HEADER                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Shop: LUCKY HYDRAULIC PARTS      â”‚  â”‚ DOCUMENT TYPE                â”‚ â”‚
â”‚  â”‚ Address: Shop#8, Adeel Market... â”‚  â”‚                              â”‚ â”‚
â”‚  â”‚ Tel: 03120576487                 â”‚  â”‚ Invoice: INV-2025-001        â”‚ â”‚
â”‚  â”‚ Email: daniyalarshad881996@...   â”‚  â”‚ Date: 15/01/2025             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  CUSTOMER SECTION                                                        â”‚
â”‚  Name: Customer Name                                                     â”‚
â”‚  Contact: +92-XXX-XXXXXXX                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ITEMS TABLE                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚S.No â”‚ Part No â”‚ Item          â”‚ Brand   â”‚ Qty     â”‚ Amount          â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ 1   â”‚ BP-001  â”‚ Brake Pad     â”‚ Bosch   â”‚ 5       â”‚ Rs 7,500        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  TOTALS                                                                  â”‚
â”‚                                         Total:     Rs 7,500.00          â”‚
â”‚                                         Discount:  Rs 500.00            â”‚
â”‚                                         Grand Total: Rs 7,000.00        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  FOOTER                                                                  â”‚
â”‚  NOTE: All manufacturer's Names, Numbers, Symbols...                    â”‚
â”‚  Document invalid without authorised signature.                         â”‚
â”‚                                                                         â”‚
â”‚                                        ________________________         â”‚
â”‚                                        Authorised Signature             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Summary

The Sales & Invoicing module provides a complete solution for managing the sales lifecycle:

1. **Inquiry Management** - Capture and track customer inquiries
2. **Quotation Management** - Create and convert quotations
3. **Invoice Management** - Full invoicing with stock reservation
4. **Delivery Tracking** - Partial delivery and challan management
5. **Returns Processing** - Handle returns with stock restoration
6. **Pricing Management** - Multi-tier customer pricing
7. **Accounts Receivable** - Aging analysis and payment reminders

All modules work together through shared data types and consistent UI patterns, providing a cohesive user experience.

---

> **âš ï¸ REMINDER: DO NOT CHANGE THE LOGIC AND FRONT UI**
> 
> Any modifications should maintain the existing functionality and user interface design as documented above.
